<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Projetos Internos</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/style.css">
</head>
<body>
  <div id="header-container"></div>

  <main class="main-container">
    <section class="projetos-section">
      <h2>Projetos Internos</h2>
      <div id="projetosContainer" class="projetos-container"></div>
    </section>
  </main>

  <div id="footer-container"></div>
  <script src="./js/partials.js"></script>

  <script src="./js/layoutLoader.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const response = await fetch('/api/projetos');
      const projetos = await response.json();
      const container = document.getElementById('projetosContainer');
    
      projetos.forEach(p => {
        // Verifica se `p.imagens` Ã© um array
        if (!Array.isArray(p.imagens)) {
          p.imagens = [p.imagens];
        }
    
        const projectCard = document.createElement('div');
        projectCard.className = 'project-card';
    
        const title = document.createElement('h3');
        title.textContent = p.titulo;
        
        const desc = document.createElement('p');
        desc.textContent = p.descricao;
    
        const gallery = document.createElement('div');
        gallery.className = 'project-gallery';
    
        p.imagens.forEach(imgPath => {
          const img = document.createElement('img');
          img.src = imgPath;
          img.alt = p.titulo;
          gallery.appendChild(img);
        });
    
        projectCard.appendChild(title);
        projectCard.appendChild(desc);
        projectCard.appendChild(gallery);
        container.appendChild(projectCard);
      });
    });
    </script>    
</body>
</html>
